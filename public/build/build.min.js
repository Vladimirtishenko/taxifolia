function SiteModel(){"use strict";this.xhr=function(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){t=!1}}return t||"undefined"==typeof XMLHttpRequest||(t=new XMLHttpRequest),t}}function SiteController(){"use strict";this.registrationModule()}function handlerToLoad(){"use strict";new SiteController}function TopSlider(t){"use strict";return t?(this.width=t.clientHeight,this.element=t.firstElementChild,this.children=this.element.children,this.count=this.children.length,this.current=0,this.constructControls(),void this.addEventListeners()):!1}function CommentSlider(t){"use strict";return t?(this.width=t.parentNode.clientWidth,this.element=t,this.children=this.element.children,this.count=this.children.length,this.current=0,this.state=!0,this.addStyleWidth(),void this.addEventListeners()):!1}SiteModel.prototype.Xhr=function(t,e,i){"use strict";var n=new XMLHttpRequest;n.onreadystatechange=function(t){200===n.status&&4===n.readyState&&callback(n.responseText,objectCaller)},n.open(t,e,!0),n.send()},SiteController.prototype=Object.create(SiteModel.prototype),SiteController.prototype.registrationModule=function(){"use strict";new TopSlider(document.querySelector(".taxifolia-top-slider")),new CommentSlider(document.querySelector(".taxifolia-slider-comments-list"))},window.addEventListener("DOMContentLoaded",handlerToLoad),TopSlider.prototype=Object.create(SiteController.prototype),TopSlider.prototype.constructControls=function(){"use strict";for(var t,e='<div class="taxifolia-top-slider-controls">',i=this,n=0;n<this.count;n++)this.children[n].setAttribute("data-slide",n),t=0==n?"-active":"",e+='<span class="taxifolia-top-slider-controls-item '+t+'" data-number="'+n+'"></span>';e+="</div>";try{return i.element.parentNode.insertAdjacentHTML("beforeend",e),!0}catch(r){throw Error("No Slides")}},TopSlider.prototype.addEventListeners=function(){"use strict";var t=document.querySelector(".taxifolia-top-slider-controls");t.addEventListener("click",this.handlerToListeners.bind(this))},TopSlider.prototype.handlerToListeners=function(){"use strict";var t=event.target,e="string"==typeof t.getAttribute("data-number")?parseInt(t.getAttribute("data-number")):null,i=this.element.parentNode.querySelector(".-active");null==e||t.classList.contains("-active")||(this.element.style.cssText="transform: translateY("+this.width*-e+"px)",this.current=e,i.classList.remove("-active"),t.classList.add("-active"))},CommentSlider.prototype=Object.create(SiteController.prototype),CommentSlider.prototype.addEventListeners=function(){"use strict";var t=document.querySelector(".taxifolia-slider-comments-controls");t.addEventListener("click",this.handlerToListeners.bind(this))},CommentSlider.prototype.addStyleWidth=function(){"use strict";this.element.style.cssText+="width: "+this.width*(this.count+1)+"px"},CommentSlider.prototype.handlerToListeners=function(){"use strict";var t=event.target,e=t.getAttribute("data-arrow"),i=this;e&&1==i.state&&(i.state=!1,"prev"==e?(i.element.insertBefore(i.element.lastElementChild,i.element.firstElementChild),i.element.style.cssText+="transform: translateX("+-i.width+"px)",setTimeout(function(){i.element.style.cssText+="transition: .5s; transform: translateX(0px)",i.animation(null)},20)):(i.element.style.cssText+="transition: .5s; transform: translateX("+-i.width+"px)",i.animation("appendChild",i.element.firstElementChild)))},CommentSlider.prototype.animation=function(t,e){"use strict";var i=this;setTimeout(function(){t&&i.element[t](e),i.element.style.cssText+="transition-duration: 0s; transform: translateX(0)",i.state=!0},600)},function(t){"use strict";t.fn.waterwheelCarousel=function(e){function i(){y={itemsContainer:t(v),totalItems:t(v).find("img").length,containerWidth:t(v).width(),containerHeight:t(v).height(),currentCenterItem:null,previousCenterItem:null,items:[],calculations:[],carouselRotationsLeft:0,currentlyMoving:!1,itemsAnimating:0,currentSpeed:C.speed,intervalTimer:null,currentDirection:"forward",leftItemsCount:0,rightItemsCount:0,performingSetup:!0},y.itemsContainer.find("img").removeClass(C.activeClassName)}function n(t){clearTimeout(y.autoPlayTimer),t||0===C.autoPlay||(y.autoPlayTimer=setTimeout(function(){g(C.autoPlay>0?"forward":"backward")},Math.abs(C.autoPlay)))}function r(e){if(C.preloadImages===!1)return void e();var i=y.itemsContainer.find("img"),n=0,r=i.length;i.each(function(){t(this).bind("load",function(){return n+=1,n===r?void e():void 0}),t(this).attr("src",t(this).attr("src")),this.complete&&t(this).trigger("load")})}function o(){y.itemsContainer.find("img").each(function(){(void 0==t(this).data("original_width")||C.forcedImageWidth>0)&&t(this).data("original_width",t(this).width()),(void 0==t(this).data("original_height")||C.forcedImageHeight>0)&&t(this).data("original_height",t(this).height())})}function a(){C.forcedImageWidth&&C.forcedImageHeight&&y.itemsContainer.find("img").each(function(){t(this).width(C.forcedImageWidth),t(this).height(C.forcedImageHeight)})}function s(){y.itemsContainer.find("img:first");y.calculations[0]={distance:0,offset:0,opacity:1};for(var t=C.horizonOffset,e=C.separation,i=1;i<=C.flankingItems+2;i++)i>1&&(t*=C.horizonOffsetMultiplier,e*=C.separationMultiplier),y.calculations[i]={distance:y.calculations[i-1].distance+e,offset:y.calculations[i-1].offset+t,opacity:y.calculations[i-1].opacity*C.opacityMultiplier};C.edgeFadeEnabled?y.calculations[C.flankingItems+1].opacity=0:y.calculations[C.flankingItems+1]={distance:0,offset:0,opacity:0}}function c(){y.items=y.itemsContainer.find("img");for(var e=0;e<y.totalItems;e++)y.items[e]=t(y.items[e]);0===C.horizon&&("horizontal"===C.orientation?C.horizon=y.containerHeight/2:C.horizon=y.containerWidth/2),y.itemsContainer.css("position","relative").find("img").each(function(){var e,i;"horizontal"===C.orientation?(e=y.containerWidth/2-t(this).data("original_width")/2,i=C.horizon-t(this).data("original_height")/2):(e=C.horizon-t(this).data("original_width")/2,i=y.containerHeight/2-t(this).data("original_height")/2),t(this).css({left:e,top:i,visibility:"visible",position:"absolute","z-index":0,opacity:0}).data({top:i,left:e,oldPosition:0,currentPosition:0,depth:0,opacity:0}).show()})}function l(){C.startingItem=0===C.startingItem?Math.round(y.totalItems/2):C.startingItem,y.rightItemsCount=Math.ceil((y.totalItems-1)/2),y.leftItemsCount=Math.floor((y.totalItems-1)/2),y.carouselRotationsLeft=1,h(y.items[C.startingItem-1],0),y.items[C.startingItem-1].css("opacity",1);for(var t=C.startingItem-1,e=1;e<=y.rightItemsCount;e++)t<y.totalItems-1?t+=1:t=0,y.items[t].css("opacity",1),h(y.items[t],e);for(var t=C.startingItem-1,e=-1;e>=-1*y.leftItemsCount;e--)t>0?t-=1:t=y.totalItems-1,y.items[t].css("opacity",1),h(y.items[t],e)}function d(t,e){var i=Math.abs(e);if(i<C.flankingItems+1)var n=y.calculations[i];else var n=y.calculations[C.flankingItems+1];var r=Math.pow(C.sizeMultiplier,i),o=r*t.data("original_width"),a=r*t.data("original_height"),s=(Math.abs(t.width()-o),Math.abs(t.height()-a),n.offset),c=n.distance;if(0>e&&(c*=-1),"horizontal"==C.orientation)var l=y.containerWidth/2,d=l+c-o/2,h=C.horizon-s-a/2;else var l=y.containerHeight/2,d=C.horizon-s-o/2,h=l+c-a/2;var u;u=0===e?1:n.opacity;var m=C.flankingItems+2-i;t.data("width",o),t.data("height",a),t.data("top",h),t.data("left",d),t.data("oldPosition",t.data("currentPosition")),t.data("depth",m),t.data("opacity",u)}function h(t,e){Math.abs(e)<=C.flankingItems+1?(d(t,e),y.itemsAnimating++,t.css("z-index",t.data().depth).animate({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity},y.currentSpeed,C.animationEasing,function(){u(t,e)})):(t.data("currentPosition",e),0===t.data("oldPosition")&&t.css({left:t.data().left,width:t.data().width,height:t.data().height,top:t.data().top,opacity:t.data().opacity,"z-index":t.data().depth}))}function u(t,e){y.itemsAnimating--,t.data("currentPosition",e),0===e&&(y.currentCenterItem=t),0===y.itemsAnimating&&(y.carouselRotationsLeft-=1,y.currentlyMoving=!1,y.carouselRotationsLeft>0?m(0):(y.currentSpeed=C.speed,y.currentCenterItem.addClass(C.activeClassName),y.performingSetup===!1&&(C.movedToCenter(y.currentCenterItem),C.movedFromCenter(y.previousCenterItem)),y.performingSetup=!1,n()))}function m(e){if(y.currentlyMoving===!1){y.currentCenterItem.removeClass(C.activeClassName),y.currentlyMoving=!0,y.itemsAnimating=0,y.carouselRotationsLeft+=e,C.quickerForFurther===!0&&(e>1&&(y.currentSpeed=C.speed/e),y.currentSpeed=y.currentSpeed<100?100:y.currentSpeed);for(var i=0;i<y.totalItems;i++){var n,r=t(y.items[i]),o=r.data("currentPosition");n="forward"==y.currentDirection?o-1:o+1;var a=n>0?y.rightItemsCount:y.leftItemsCount;Math.abs(n)>a&&(n=-1*o,y.totalItems%2==0&&(n+=1)),h(r,n)}}}function f(){var t=y.currentCenterItem.next();return t.length<=0&&(t=y.currentCenterItem.parent().children().first()),t}function p(){var t=y.currentCenterItem.prev();return t.length<=0&&(t=y.currentCenterItem.parent().children().last()),t}function g(t){y.currentlyMoving===!1&&(y.previousCenterItem=y.currentCenterItem,C.movingFromCenter(y.currentCenterItem),"backward"==t?(C.movingToCenter(p()),y.currentDirection="backward"):"forward"==t&&(C.movingToCenter(f()),y.currentDirection="forward")),m(1)}if(this.length>1)return this.each(function(){t(this).waterwheelCarousel(e)}),this;var v=this,C={},y={};return t(this).find("img").bind("click",function(){var e=t(this).data().currentPosition;if(0!=C.imageNav&&!(Math.abs(e)>=C.flankingItems+1||y.currentlyMoving)){y.previousCenterItem=y.currentCenterItem,n(!0),C.autoPlay=0;var i=Math.abs(e);0==e?C.clickedCenter(t(this)):(C.movingFromCenter(y.currentCenterItem),C.movingToCenter(t(this)),0>e?(y.currentDirection="backward",m(i)):e>0&&(y.currentDirection="forward",m(i)))}}),t(this).find("a").bind("click",function(e){var i=0==t(this).find("img").data("currentPosition");return 1===C.linkHandling||2===C.linkHandling&&!i?(e.preventDefault(),!1):void 0}),t(document).keydown(function(t){return C.keyboardNav&&(37===t.which&&"horizontal"==C.orientation||38===t.which&&"vertical"==C.orientation?(n(!0),C.autoPlay=0,g("backward")):(39===t.which&&"horizontal"==C.orientation||40===t.which&&"vertical"==C.orientation)&&(n(!0),C.autoPlay=0,g("forward")),C.keyboardNavOverride&&("horizontal"==C.orientation&&(37===t.which||39===t.which)||"vertical"==C.orientation&&(38===t.which||40===t.which)))?(t.preventDefault(),!1):void 0}),this.reload=function(e){if("object"==typeof e);else;C=t.extend({},t.fn.waterwheelCarousel.defaults,e),i(),y.itemsContainer.find("img").hide(),a(),r(function(){o(),s(),c(),l()})},this.next=function(){n(!0),C.autoPlay=0,g("forward")},this.prev=function(){n(!0),C.autoPlay=0,g("backward")},this.reload(e),this},t.fn.waterwheelCarousel.defaults={startingItem:1,separation:175,separationMultiplier:.6,horizonOffset:0,horizonOffsetMultiplier:1,sizeMultiplier:.7,opacityMultiplier:.8,horizon:0,flankingItems:3,speed:300,animationEasing:"linear",quickerForFurther:!0,edgeFadeEnabled:!1,linkHandling:2,autoPlay:0,orientation:"horizontal",activeClassName:"carousel-center",keyboardNav:!1,keyboardNavOverride:!0,imageNav:!0,preloadImages:!0,forcedImageWidth:0,forcedImageHeight:0,movingToCenter:t.noop,movedToCenter:t.noop,clickedCenter:t.noop,movingFromCenter:t.noop,movedFromCenter:t.noop}}(jQuery);